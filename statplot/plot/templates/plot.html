{% extends 'base.html' %}
{% load custom_filters %}
{% block content %}
<div class="navbar">
    <div class="dropdown">
        <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="bi bi-wrench-adjustable"></i>
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#">Functions Tab</a>
        </div>
      </div>
      <a href="{% url 'plot:plot' %}" class="btn btn-dark">+</a>
</div>

<div class="dataTab">
    <div class="user_input">
        <h3>Upload Your Data Here</h3>
        <form method="POST" enctype="multipart/form-data" action="{% url 'plot:data_view' %}">
            {% csrf_token %}
            <div class="form-group">
                <label for="csv_file">Upload CSV File</label>
                <input type="file" id="csv_file" name="csv_file" accept=".csv" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Upload</button>
        </form>
    </div>
    
    {% if csv_data %}
    <div class="csv_table">
        <h3>Uploaded Data</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    {% for column in columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in csv_data %}
                <tr>
                    {% for column in columns %}
                    <td>{{ row|get_item:column }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
</div>
{% endblock %}